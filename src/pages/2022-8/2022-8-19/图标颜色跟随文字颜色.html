<title>背景色镂空技术之color属性实现颜色可控图标实现3</title>
<style>
  .out {
    color:#34538b;
  }

  .icon {
    display: inline-block;
    width: 16px;
    height: 20px;
    position: relative;
  }

  .icon::before {
    content: '';
    background-color: currentColor;
    width: 100%;
    height: 100%;
    position: absolute;
  }

  .icon::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: url("/config/images/sprite_icons.png");
  }

  .link:hover {
    color: green;
  }

  .icon1:after {
    background-position: 0 0;
  }

  .icon2:after {
    background-position: -20px 0;
  }

  .icon3:after {
    background-position: -40px 0;
  }

  .icon4:after {
    background-position: -60px 0;
  }

  .link {
    margin-right: 15px;
  }
</style>
<div id="effect" class="part">
  <h3>效果：</h3>
  <div class="show">
    <div class="demo">
      更改颜色：<input id="colorInput" type="color" value="#34538b" autocomplete="off">
      <p id="colorP" class="out">
        <a href="##" class="link"><i class="icon icon1"></i>返回</a>
        <a href="##" class="link"><i class="icon icon2"></i>刷新</a>
        <a href="##" class="link"><i class="icon icon3"></i>收藏</a>
        <a href="##" class="link"><i class="icon icon4"></i>展开图片</a>
      </p>
    </div>
  </div>
  <div class="markdown-section">
    <blockquote class="block-tip">
      <h5>2022年8月19日</h5>
      <p>没有设置currentColor为什么图标也跟着背景色变化?
      </p>
      <p>因为图标放在了a标签内部</p>
    </blockquote>

    <blockquote class="block-tip">
      <h5>2022年8月19日</h5>
      <p>background-image为什么设置在after元素上?
      </p>
      <p>使用不透明背景遮挡icon的背景色
      </p>
    </blockquote>
    <blockquote class="block-warning">
      <h5>2022年8月19日15:01:31</h5>
      <p>伪元素注释掉content之后不显示了, 注释掉icon的after的content属性试试
      </p>
    </blockquote>
    <blockquote class="block-tip">
      <h5>2022年8月19日15:06:41</h5>
      <p>明明是icon的背景色, 为什么设置在父元素上?</p>
      <p>对所有icon的父元素设置color或者background,修改颜色的时候就不用遍历每一个icon了
      </p>
      <p>现在有2种情况: 1,父元素设置color 2,父元素设置background
        父元素设置background, 子元素的背景都被污染了
      </p>
    </blockquote>
  </div>
</div>
<script>
  var eleInput = document.getElementById("colorInput"),
    eleP = document.getElementById("colorP");
  eleInput.onchange = function () {
    eleP.style.color = this.value;
  };
</script>
